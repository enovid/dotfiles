#!/bin/sh
#
# Temporarily add color variables to Xresources for use in i3
#

usage() { >&2 echo "Usage: set-theme [-light] [-dark]" ; exit 1 ; }

change_i3_colors () {
    SRC="$(realpath $0)"                     # Path to this script
    DIR=${SRC%/*}/
    COLORS="$DIR/$1"                         # Path to file containing colors
    # Make temp file with added color variables
    cat ~/.Xresources $COLORS > /tmp/xresources
    # Source tmp file as if it were .Xresources
    xrdb /tmp/xresources
    # Restart i3 to apply color changes
    i3-msg restart
}

case $1 in
    -light)
        change_i3_colors light
        # Change wallpaper
        hsetroot -solid "#FFFFFF" 
        # Change cursor color in Kitty
        kitty @ --to unix:/tmp/mykitty set-colors -c cursor_text_color=#FFFFFF cursor=#000000
        ;;
    -dark)
        change_i3_colors dark
        # Change wallpaper
        hsetroot -solid "#000000" 
        # Change cursor color in Kitty
        kitty @ --to unix:/tmp/mykitty set-colors -c cursor_text_color=#000000 cursor=#DDDDDD
        ;;
     *)
         usage
esac

